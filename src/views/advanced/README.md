## 节流函数

节流函数的基本思想是：函数执行后，设定一个固定的时间间隔，在这个时间间隔内不允许函数再次执行，等到时间间隔结束后，函数才可以再次执行。

### 节流函数常用的场景

- 窗口大小调整事件（resize）：确保处理函数不会因为窗口大小的频繁变化而频繁执行。
- 滚动事件（scroll）：例如，用于懒加载图片或无限滚动的场景，避免因为滚动过快而导致性能问题。
- 频繁的用户输入：如搜索框的自动提示功能，每隔一段时间才发送请求，而不是每次用户输入时都发送。

### 自定义节流函数

#### 浏览器环境

浏览器是根据帧渲染的，每一帧 16.6ms (60FPS)

浏览器在这个时间段内

- 处理输入：处理用户输入事件，如点击、键盘输入、鼠标移动等。
- JavaScript 执行：执行挂起的 JavaScript 任务，更新 DOM。
- 样式计算：计算样式并将其应用于 DOM 元素。
- 布局：确定每个元素在屏幕上的位置和大小。
- 绘制：将元素的视觉信息绘制到多个图层。
- 合成：将图层合成，并输出到屏幕上。

如果有一个需要大量渲染的程序一次执行，比如一次性，添加 10000 个虚拟 dom
就会导致卡顿

当单次渲染内容过多的时候就会导致卡顿，需要按时渲染

让任务分片执行

就是使用 requestIdleCallback API 来

16.6ms 是一帧的持续时间，浏览器会在 16.6ms 执行很多东西，如果有剩余的时间，就会执行 requestIdleCallback

lodash_throttle.ts 记录了 lodash 中 分流源码
